<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UC HAMDI'S - Mode Online</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Special+Elite&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="title-header">
            <div class="header-icon-group">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.5,17.5a3,3,0,1,1-3-3A3,3,0,0,1,17.5,17.5ZM17.5,13.5a1,1,0,1,0,1,1A1,1,0,0,0,17.5,13.5Z" fill="currentColor"/><path d="M19,20H16a1,1,0,0,0-1,1v.5a.5.5,0,0,0,.5.5h4a.5.5,0,0,0,.5-.5V21A1,1,0,0,0,19,20Z" fill="currentColor"/><path d="M6.5,17.5a3,3,0,1,1-3-3A3,3,0,0,1,6.5,17.5ZM6.5,13.5a1,1,0,1,0,1,1A1,1,0,0,0,6.5,13.5Z" fill="currentColor"/><path d="M8,20H5a1,1,0,0,0-1,1v.5a.5.5,0,0,0,.5.5h4a.5.5,0,0,0,.5-.5V21A1,1,0,0,0,8,20Z" fill="currentColor"/><path d="M12,12.5a4.5,4.5,0,1,1-4.5-4.5A4.5,4.5,0,0,1,12,12.5ZM12,5.5a2.5,2.5,0,1,0,2.5,2.5A2.5,2.5,0,0,0,12,5.5Z" fill="currentColor"/><path d="M15,14H9a1,1,0,0,0-1,1v1.5a.5.5,0,0,0,.5.5h7a.5.5,0,0,0,.5-.5V15A1,1,0,0,0,15,14Z" fill="currentColor"/></svg>
                <h1>UC ONLINE</h1>
            </div>
            <a href="index.html" class="header-controls" style="text-decoration: none; font-size: 1.2em; color: var(--theme-text-secondary);" title="Kembali ke Menu Utama"><i class="fas fa-times-circle"></i></a>
        </div>

        <div id="online-lobby-section">
            <div class="lobby-actions">
                <h2><i class="fas fa-globe"></i> Lobi Online</h2>
                <div class="input-group">
                    <input type="text" id="player-name-online" placeholder="Masukkan Nama Anda..." maxlength="15">
                </div>
                <button id="create-room-btn" class="btn-primary"><i class="fas fa-plus-circle"></i> Buat Room Baru</button>
                <hr class="config-divider" style="margin: 15px 0;">
                <div class="input-group">
                    <input type="text" id="join-room-code" placeholder="Masukkan Kode Room..." maxlength="5" style="text-transform:uppercase">
                    <button id="join-room-btn" class="btn-secondary"><i class="fas fa-sign-in-alt"></i> Gabung</button>
                </div>
                <p id="online-error" class="error-message hidden"></p>
            </div>
        </div>

        <div id="online-game-room" class="hidden">
            <h2 id="room-title">Room: <span id="room-code-display" class="role-mrwhite"></span> <button id="copy-code-btn" title="Salin Kode"><i class="fas fa-copy"></i></button></h2>
            <p id="game-status-info">Bagikan kode di atas agar temanmu bisa bergabung!</p>
            
            <h3 style="margin-top: 10px;"><i class="fas fa-users"></i> Pemain di Room (<span id="player-count">0</span>)</h3>
            <ul id="online-player-list" class="player-avatar-grid"></ul>

            <div class="online-action-buttons">
                <button id="start-game-online-btn" class="btn-start-game hidden"><i class="fas fa-play"></i> Mulai Permainan (Host)</button>
                <button id="leave-room-btn" class="btn-danger-text">Keluar dari Room</button>
            </div>
        </div>

        <div id="card-reveal-modal" class="modal hidden">
            <div class="modal-content card-modal-content">
                <h3 id="card-reveal-popup-title">Kartu untuk [Nama Pemain]!</h3>
                <div class="card-scene">
                    <div class="card" id="role-card">
                        <div class="card-face card-back">
                            <div class="card-back-design">?</div>
                            <p><i class="fas fa-hand-pointer"></i> SENTUH KARTU UNTUK MEMBALIK</p>
                        </div>
                        <div class="card-face card-front">
                            <div class="stamp">TOP SECRET</div>
                            <h4 class="card-role-title">Peran Anda:</h4>
                            <p id="card-player-role"></p>
                            <h4 class="card-word-title">Kata Rahasia:</h4>
                            <p id="card-player-word"></p>
                            <div class="mission-box">
                                <h4 class="card-mission-title">MISI ANDA:</h4>
                                <p id="card-player-mission"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="hide-card-and-proceed-btn" class="btn-primary hidden"><i class="fas fa-eye-slash"></i> Saya Mengerti</button>
            </div>
        </div>

        <div id="mr-white-guess-section" class="modal hidden">
            <div class="modal-content">
                <h3><i class="fas fa-user-tie"></i> Mr. White Teridentifikasi!</h3>
                <p><strong id="mr-white-name-guess"></strong>, Anda punya satu kesempatan untuk menebak kata rahasia Civilian:</p>
                <input type="text" id="mr-white-word-guess-input" placeholder="Ketik tebakan kata...">
                <button id="submit-mr-white-guess-btn" class="btn-primary">Kirim Tebakan</button>
                <p id="mr-white-wait-message" class="hidden">Menunggu <strong id="mr-white-wait-name"></strong> menebak...</p>
            </div>
        </div>

        <div id="elimination-result-popup" class="modal hidden">
            <div class="modal-content">
                <h3 id="eliminated-player-info"></h3>
                <div id="truth-or-dare-section">
                    <p>Silakan pilih hukuman untuk yang tereliminasi:</p>
                    <div class="truth-dare-buttons">
                        <button id="truth-btn"><i class="fas fa-check-circle"></i> Truth</button>
                        <button id="dare-btn"><i class="fas fa-fire"></i> Dare</button>
                    </div>
                    <div id="penalty-display" class="hidden">
                        <p id="penalty-text"></p>
                    </div>
                </div>
                <p id="penalty-wait-message" class="hidden">Menunggu pemain lain melanjutkan...</p>
                <button id="close-elimination-popup-btn" class="hidden btn-secondary"><i class="fas fa-arrow-right"></i> Lanjut</button>
            </div>
        </div>

        <div id="winner-popup-modal" class="modal hidden">
            <div class="modal-content">
                <img id="confetti-animation" src="assets/images/confetti.gif" alt="Confetti" class="confetti-overlay hidden"/>
                <div class="winner-content-wrapper">
                    <h2 id="popup-winner-message">ðŸŽ‰ Selamat! ðŸŽ‰</h2>
                    <p id="popup-winner-detail"></p>
                    <div id="round-roles-section">
                        <h4>Detail Peran Babak Ini:</h4>
                        <ul id="round-roles-list"></ul>
                    </div>
                    <button id="play-again-btn" class="btn-primary hidden"><i class="fas fa-redo"></i> Main Lagi (Host)</button>
                     <p id="host-wait-message" class="hidden">Menunggu host memulai babak baru...</p>
                </div>
            </div>
        </div>

        <div class="developer-info">
            <p>Developed by Hamdi Rizal</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      const supabaseUrl = 'https://wqtqklxzkxbhatsgojfq.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndxdHFrbHh6a3hiaGF0c2dvamZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyNDI5OTIsImV4cCI6MjA2NDgxODk5Mn0.u-mZ_Y67Sy1XDUpR3GirjSoyhK7_qI4XnniqzxAYeio';
      const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);
    </script>
    <script src="online.js"></script>
</body>
</html>